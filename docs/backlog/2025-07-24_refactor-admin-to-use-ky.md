---
tags:
  - ãƒãƒƒã‚¯ãƒ­ã‚°
  - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
  - æŠ€è¡“çš„è² å‚µ
  - admin
  - ky
type: ä½œæ¥­è¨ˆç”»
status: å®Œäº†
created: 2025-07-24
updated: 2025-07-24
completed: 2025-07-24
pr_url: https://github.com/megatkhs/care-package/pull/14
---

# ãƒãƒƒã‚¯ãƒ­ã‚°: `packages/admin` ã‚’ `axios` ã‹ã‚‰ `ky` ã¸ç§»è¡Œ

> [!info] æ¦‚è¦
> ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ `ky` ã«çµ±ä¸€ã™ã‚‹ãŸã‚ã€æ—¢å­˜ã® `packages/admin` ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ `axios` ã‚’ `ky` ã«ç½®ãæ›ãˆã‚‹ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ä½œæ¥­ã€‚

## ğŸ¯ ç›®æ¨™
- `packages/admin` ã‹ã‚‰ `axios` ã¸ã®ä¾å­˜ã‚’å®Œå…¨ã«æ’é™¤ã™ã‚‹ã€‚
- ã™ã¹ã¦ã®APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ `ky` ã‚’ä½¿ã£ã¦å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«æ›¸ãæ›ãˆã‚‹ã€‚
- ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºã‚’å‰Šæ¸›ã—ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’ãƒ¢ãƒ€ãƒ³ãª `Promise` ãƒ™ãƒ¼ã‚¹ã«çµ±ä¸€ã™ã‚‹ã€‚

## ğŸ“œ èƒŒæ™¯

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ¨™æº–HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã—ã¦ã€`fetch` APIãƒ™ãƒ¼ã‚¹ã§è»½é‡ãª `ky` ã‚’æ¡ç”¨ã™ã‚‹ã“ã¨ãŒæ±ºå®šã•ã‚ŒãŸã€‚ï¼ˆå‚ç…§: `docs/1_introduction/tech_stack.md`ï¼‰
ã“ã®æ±ºå®šã«ä¼´ã„ã€æ—¢å­˜ã® `admin` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹ `axios` ã‚’ `ky` ã«ç§»è¡Œã—ã€æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã®ä¸€è²«æ€§ã‚’ä¿ã¤å¿…è¦ãŒã‚ã‚‹ã€‚

## ğŸ“‹ ã‚¿ã‚¹ã‚¯ä¸€è¦§

### 1. ä¾å­˜é–¢ä¿‚ã®æ›´æ–°
- [x] `packages/admin` ã® `package.json` ã‹ã‚‰ `axios` ã‚’å‰Šé™¤ã™ã‚‹ã€‚
  - `pnpm remove axios --filter @care-package/admin`
- [x] `packages/admin` ã« `ky` ã‚’è¿½åŠ ã™ã‚‹ã€‚
  - `pnpm add ky --filter @care-package/admin`

### 2. APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ›¸ãæ›ãˆ
- [x] `axios` ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã—ã¦ã„ã‚‹éƒ¨åˆ†ã‚’ã€`ky.create` ã‚’ä½¿ã£ãŸè¨­å®šã«ç½®ãæ›ãˆã‚‹ã€‚
- [x] `axios` ã®ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ã‚¿ãƒ¼ (`interceptors`) ã‚’ `ky` ã® `hooks` ï¼ˆ`beforeRequest`, `afterResponse`ãªã©ï¼‰ã‚’ä½¿ã£ãŸåŒç­‰ã®å‡¦ç†ã«ç§»è¡Œã™ã‚‹ã€‚
  - ä¾‹: èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒ˜ãƒƒãƒ€ãƒ¼ã«ä»˜ä¸ã™ã‚‹å‡¦ç†ãªã©ã€‚

### 3. å„APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ç½®æ›
- [x] `axios.get`, `axios.post` ãªã©ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ç®‡æ‰€ã‚’ã€`ky.get`, `ky.post` ã«æ›¸ãæ›ãˆã‚‹ã€‚
- [x] ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ‡ãƒ¼ã‚¿ã®å—ã‘å–ã‚Šæ–¹ã‚’ä¿®æ­£ã™ã‚‹ (`res.data` ã‹ã‚‰ `await res.json()` ã¸)ã€‚

### 4. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ä¿®æ­£
- [x] `axios` ã®ã‚¨ãƒ©ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ (`error.response`) ã‚’å‚ç…§ã—ã¦ã„ã‚‹ç®‡æ‰€ã‚’ã€`ky` ã® `HTTPError` ã‚’ `catch` ã™ã‚‹æ–¹å¼ã«ä¿®æ­£ã™ã‚‹ã€‚
  - `const errorData = await err.response.json();` ã®ã‚ˆã†ãªå½¢å¼ã«ãªã‚‹ã€‚

### 5. å‹•ä½œç¢ºèªã¨ãƒ†ã‚¹ãƒˆ
- [x] `admin` ã‚µã‚¤ãƒˆã®ã™ã¹ã¦ã®æ©Ÿèƒ½ãŒä»¥å‰ã¨åŒæ§˜ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã€‚
- [x] å‹ãƒã‚§ãƒƒã‚¯ (`tsc --noEmit`) ã¨ãƒªãƒ³ãƒˆ (`biome check`) ã‚’å®Ÿè¡Œã—ã€ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã€‚

## âœ… æˆåŠŸåŸºæº–
- `packages/admin` ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰å†…ã« `axios` ã®è¨˜è¿°ãŒæ®‹ã£ã¦ã„ãªã„ã€‚
- `admin` ã‚µã‚¤ãƒˆã®ã™ã¹ã¦ã®APIé€šä¿¡ãŒ `ky` ã«ã‚ˆã£ã¦è¡Œã‚ã‚Œã¦ã„ã‚‹ã€‚
- ç§»è¡Œå‰ã¨æ©Ÿèƒ½çš„ãªãƒ‡ã‚°ãƒ¬ãƒ¼ãƒ‰ãŒãªã„ã€‚

## âš ï¸ ãƒªã‚¹ã‚¯
- `axios` ã®ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ã‚¿ãƒ¼ã§è¤‡é›‘ãªå‡¦ç†ã‚’è¡Œã£ã¦ã„ã‚‹å ´åˆã€`ky` ã® `hooks` ã¸ã®ç§»è¡Œã«æ™‚é–“ãŒã‹ã‹ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¾®å¦™ãªé•ã„ã«ã‚ˆã‚Šã€äºˆæœŸã›ã¬ãƒã‚°ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€æ…é‡ãªãƒ†ã‚¹ãƒˆãŒå¿…è¦ã€‚

## ğŸ“ å®Ÿè£…çµæœ

> [!success] ç§»è¡Œå®Œäº†
> 2025-07-24ã«ã™ã¹ã¦ã®ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã—ã€PRãŒä½œæˆã•ã‚Œã¾ã—ãŸã€‚

### å®Ÿè£…å†…å®¹
- **Phase 1**: kyã®å°å…¥ã¨api.tsã®åŸºæœ¬å¤‰æ› (ã‚³ãƒŸãƒƒãƒˆ: cb80147)
- **Phase 2**: AuthContext.tsxã®ç§»è¡Œ (ã‚³ãƒŸãƒƒãƒˆ: dc39c51)
- **Phase 3**: å„ãƒšãƒ¼ã‚¸ã®ç§»è¡Œ (ã‚³ãƒŸãƒƒãƒˆ: db02d60)
- **Phase 4**: axioså®Œå…¨å‰Šé™¤ (ã‚³ãƒŸãƒƒãƒˆ: dea827f)

### å“è³ªç¢ºèª
- âœ… TypeScriptå‹ãƒã‚§ãƒƒã‚¯
- âœ… Biomeé™çš„è§£æ
- âœ… æ®µéšçš„ã‚³ãƒŸãƒƒãƒˆã«ã‚ˆã‚‹å¤‰æ›´å±¥æ­´

### PRæƒ…å ±
- **URL**: https://github.com/megatkhs/care-package/pull/14
- **ã‚¿ã‚¤ãƒˆãƒ«**: refactor(admin): migrate from axios to ky for HTTP client
- **ãƒ–ãƒ©ãƒ³ãƒ**: feature/2025-07-24_refactor-admin-to-use-ky
