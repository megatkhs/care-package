# @care-package/store-site

> **ã‚±ã‚¢ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åº—èˆ—ã‚µã‚¤ãƒˆ**  
> Next.js + TypeScript ã«ã‚ˆã‚‹é¡§å®¢å‘ã‘åº—èˆ—ã‚µã‚¤ãƒˆè‡ªå‹•ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ 

## ğŸ“‹ æ¦‚è¦

å€‹äººåº—å‘ã‘é›†å®¢æ”¯æ´Webã‚¢ãƒ—ãƒªã€Œã‚±ã‚¢ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€ã®é¡§å®¢å‘ã‘åº—èˆ—ã‚µã‚¤ãƒˆã§ã™ã€‚
å„åº—èˆ—å°‚ç”¨ã®Webã‚µã‚¤ãƒˆã‚’è‡ªå‹•ç”Ÿæˆã—ã€SEOæœ€é©åŒ–ã•ã‚ŒãŸé«˜å“è³ªãªåº—èˆ—ã‚µã‚¤ãƒˆã‚’æä¾›ã—ã¾ã™ã€‚é›†å®¢ã«å›°ã£ã¦ã„ã‚‹å€‹äººåº—ãŒæ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã§è¦‹ã¤ã‘ã‚„ã™ããªã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚

### ä¸»ãªæ©Ÿèƒ½ï¼ˆPhase 4-6ã§å®Ÿè£…äºˆå®šï¼‰

- ğŸŒ **åº—èˆ—ã‚µã‚¤ãƒˆè‡ªå‹•ç”Ÿæˆ**: åº—èˆ—æƒ…å ±ã«åŸºã¥ãå‹•çš„ã‚µã‚¤ãƒˆç”Ÿæˆ
- ğŸ” **SEOæœ€é©åŒ–**: ãƒ¡ã‚¿ã‚¿ã‚°ãƒ»æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ãƒ»OGPè¨­å®š
- ğŸ“± **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ**: ã‚¹ãƒãƒ›ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ»ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—å®Œå…¨å¯¾å¿œ
- ğŸ“¢ **ãŠçŸ¥ã‚‰ã›è¡¨ç¤º**: åº—èˆ—ã‹ã‚‰ã®æœ€æ–°æƒ…å ±é…ä¿¡
- ğŸ“ **åº—èˆ—æƒ…å ±è¡¨ç¤º**: åŸºæœ¬æƒ…å ±ãƒ»å–¶æ¥­æ™‚é–“ãƒ»ã‚¢ã‚¯ã‚»ã‚¹æƒ…å ±
- ğŸ”— **SNSã‚·ã‚§ã‚¢å¯¾å¿œ**: Twitterãƒ»Facebookãƒ»LINEå¯¾å¿œ
- ğŸ“Š **ã‚¢ã‚¯ã‚»ã‚¹è§£æ**: Google Analyticsé€£æº
- ğŸ—ºï¸ **åœ°å›³è¡¨ç¤º**: Google MapsåŸ‹ã‚è¾¼ã¿

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ï¼ˆäºˆå®šï¼‰

- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Next.js 14+ (App Router)
- **è¨€èª**: TypeScript
- **ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°**: SSR/ISR (é™çš„ã‚µã‚¤ãƒˆç”Ÿæˆ)
- **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**: Tailwind CSS
- **SEO**: next-seo + æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿
- **åœ°å›³**: Google Maps Embed API
- **åˆ†æ**: Google Analytics 4
- **ç”»åƒæœ€é©åŒ–**: Next.js Image Optimization
- **ãƒ•ã‚©ãƒ³ãƒˆ**: Google Fonts

## ğŸš€ é–‹ç™ºã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

> âš ï¸ **ç¾åœ¨æœªå®Ÿè£…**  
> Phase 4ã§å®Ÿè£…é–‹å§‹ã€Phase 6ã§é«˜åº¦ãªSEOæ©Ÿèƒ½è¿½åŠ äºˆå®š

### Phase 4: åŸºæœ¬ã‚µã‚¤ãƒˆç”Ÿæˆï¼ˆæœªå®Ÿè£…ï¼‰
- [ ] å‹•çš„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆ`/stores/[storeId]`ï¼‰
- [ ] åº—èˆ—æƒ…å ±è¡¨ç¤ºãƒšãƒ¼ã‚¸
- [ ] ãŠçŸ¥ã‚‰ã›ä¸€è¦§ãƒ»è©³ç´°ãƒšãƒ¼ã‚¸
- [ ] åŸºæœ¬çš„ãªSEOå¯¾å¿œï¼ˆãƒ¡ã‚¿ã‚¿ã‚°ãƒ»OGPï¼‰
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–UI

### Phase 5: æ©Ÿèƒ½å¼·åŒ–
- [ ] å•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ 
- [ ] ã‚¢ã‚¯ã‚»ã‚¹è§£æé€£æº
- [ ] ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ¡ãƒ‡ã‚£ã‚¢é€£æº

### Phase 6: é«˜åº¦ãªSEOãƒ»é›†å®¢æ©Ÿèƒ½
- [ ] æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ï¼ˆJSON-LDï¼‰
- [ ] ã‚µã‚¤ãƒˆãƒãƒƒãƒ—è‡ªå‹•ç”Ÿæˆ
- [ ] AMPå¯¾å¿œï¼ˆæ¤œè¨ï¼‰
- [ ] PWAæ©Ÿèƒ½ï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œï¼‰

## ğŸ¯ SEOæœ€é©åŒ–æˆ¦ç•¥

### åŸºæœ¬çš„ãªSEOå¯¾å¿œ

```typescript
// pages/stores/[storeId]/index.tsx
import { Metadata } from 'next'

export async function generateMetadata({ params }): Promise<Metadata> {
  const store = await getStore(params.storeId)
  
  return {
    title: `${store.name} - ${store.category} | ã‚±ã‚¢ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸`,
    description: `${store.address}ã®${store.category}ã€Œ${store.name}ã€ã€‚${store.description}`,
    keywords: [store.category, store.address, store.name],
    openGraph: {
      title: store.name,
      description: store.description,
      images: [store.mainImage],
      type: 'business.business',
    },
    twitter: {
      card: 'summary_large_image',
      title: store.name,
      description: store.description,
      images: [store.mainImage],
    }
  }
}
```

### æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ï¼ˆJSON-LDï¼‰

```typescript
// components/StructuredData.tsx
const businessSchema = {
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  "name": store.name,
  "description": store.description,
  "address": {
    "@type": "PostalAddress",
    "streetAddress": store.address,
    "addressCountry": "JP"
  },
  "telephone": store.phoneNumber,
  "openingHours": store.businessHours,
  "url": `https://care-package.com/stores/${store.id}`,
  "image": store.images
}
```

## ğŸŒ ã‚µã‚¤ãƒˆæ§‹é€ è¨­è¨ˆ

### URLæ§‹é€ 

```
https://care-package.com/stores/
â”œâ”€â”€ [storeId]/                    # åº—èˆ—ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸
â”œâ”€â”€ [storeId]/about              # åº—èˆ—ã«ã¤ã„ã¦
â”œâ”€â”€ [storeId]/menu               # ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ»ã‚µãƒ¼ãƒ“ã‚¹
â”œâ”€â”€ [storeId]/news               # ãŠçŸ¥ã‚‰ã›ä¸€è¦§
â”œâ”€â”€ [storeId]/news/[newsId]      # ãŠçŸ¥ã‚‰ã›è©³ç´°
â”œâ”€â”€ [storeId]/contact            # ãŠå•ã„åˆã‚ã›
â””â”€â”€ [storeId]/access             # ã‚¢ã‚¯ã‚»ã‚¹æƒ…å ±
```

### å‹•çš„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å®Ÿè£…ä¾‹

```typescript
// app/stores/[storeId]/page.tsx
interface Props {
  params: { storeId: string }
}

export default async function StorePage({ params }: Props) {
  const store = await getStore(params.storeId)
  
  if (!store) {
    return notFound()
  }
  
  return (
    <StoreLayout store={store}>
      <StoreHero store={store} />
      <StoreInfo store={store} />
      <StoreNews storeId={store.id} />
      <StoreContact store={store} />
    </StoreLayout>
  )
}

// é™çš„ç”Ÿæˆç”¨ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ç”Ÿæˆ
export async function generateStaticParams() {
  const stores = await getAllStores()
  
  return stores.map((store) => ({
    storeId: store.id
  }))
}
```

## ğŸ“± ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³

### ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

```css
/* Tailwind CSS ã‚«ã‚¹ã‚¿ãƒ è¨­å®š */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ */
@layer components {
  .store-container {
    @apply max-w-4xl mx-auto px-4 sm:px-6 lg:px-8;
  }
  
  .store-hero {
    @apply relative h-64 sm:h-80 md:h-96 bg-cover bg-center;
  }
  
  .store-card {
    @apply bg-white rounded-lg shadow-md overflow-hidden;
  }
}
```

### ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆæˆ¦ç•¥

- **ãƒ¢ãƒã‚¤ãƒ«**: 320px-768pxï¼ˆæœ€å„ªå…ˆï¼‰
- **ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ**: 768px-1024px
- **ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—**: 1024pxä»¥ä¸Š

## ğŸ” ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### Next.jsæœ€é©åŒ–æ©Ÿèƒ½

```typescript
// next.config.js
const nextConfig = {
  // ç”»åƒæœ€é©åŒ–
  images: {
    domains: ['store-images.care-package.com'],
    formats: ['image/webp', 'image/avif'],
  },
  
  // å®Ÿé¨“çš„æ©Ÿèƒ½
  experimental: {
    appDir: true,
    serverActions: true,
  },
  
  // ISRè¨­å®š
  async rewrites() {
    return [
      {
        source: '/stores/:storeId',
        destination: '/api/stores/:storeId'
      }
    ]
  }
}
```

### Core Web Vitalså¯¾å¿œ

```typescript
// components/PerformanceOptimized.tsx
import Image from 'next/image'
import { Suspense } from 'react'

// ç”»åƒã®é…å»¶èª­ã¿è¾¼ã¿
<Image
  src={store.mainImage}
  alt={store.name}
  width={800}
  height={400}
  priority={false}
  placeholder="blur"
  blurDataURL="data:image/jpeg;base64,..."
/>

// ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é…å»¶èª­ã¿è¾¼ã¿
<Suspense fallback={<StoreInfoSkeleton />}>
  <StoreInfo storeId={storeId} />
</Suspense>
```

## ğŸ“Š ã‚¢ã‚¯ã‚»ã‚¹è§£æçµ±åˆ

### Google Analytics 4

```typescript
// lib/analytics.ts
import { GoogleAnalytics } from '@next/third-parties/google'

// ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼è¨ˆæ¸¬
export const trackPageView = (url: string, storeId: string) => {
  gtag('config', GA_TRACKING_ID, {
    page_location: url,
    custom_map: {
      custom_parameter_1: 'store_id'
    },
    store_id: storeId
  })
}

// ã‚¤ãƒ™ãƒ³ãƒˆè¨ˆæ¸¬
export const trackStoreContact = (storeId: string, method: string) => {
  gtag('event', 'store_contact', {
    event_category: 'Store Interaction',
    event_label: storeId,
    contact_method: method
  })
}
```

## ğŸ—ºï¸ åœ°å›³ãƒ»ä½ç½®æƒ…å ±æ©Ÿèƒ½

### Google MapsåŸ‹ã‚è¾¼ã¿

```typescript
// components/StoreMap.tsx
interface StoreMapProps {
  address: string
  storeName: string
}

export const StoreMap: React.FC<StoreMapProps> = ({ address, storeName }) => {
  const mapUrl = `https://www.google.com/maps/embed/v1/place?key=${process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY}&q=${encodeURIComponent(address)}`
  
  return (
    <iframe
      src={mapUrl}
      width="100%"
      height="300"
      style={{ border: 0 }}
      allowFullScreen
      loading="lazy"
      referrerPolicy="no-referrer-when-downgrade"
      title={`${storeName}ã®åœ°å›³`}
    />
  )
}
```

## ğŸ“§ ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ 

### Server Actionsæ´»ç”¨

```typescript
// app/stores/[storeId]/contact/actions.ts
'use server'

import { z } from 'zod'

const contactSchema = z.object({
  name: z.string().min(1, 'åå‰ã¯å¿…é ˆã§ã™'),
  email: z.string().email('æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),
  message: z.string().min(10, 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯10æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„')
})

export async function submitContact(
  storeId: string, 
  formData: FormData
) {
  const validatedFields = contactSchema.safeParse({
    name: formData.get('name'),
    email: formData.get('email'),
    message: formData.get('message')
  })

  if (!validatedFields.success) {
    return { error: 'ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼' }
  }

  // ãƒ¡ãƒ¼ãƒ«é€ä¿¡å‡¦ç†
  await sendContactEmail(storeId, validatedFields.data)
  
  return { success: true }
}
```

## ğŸ”§ äºˆæƒ³ã•ã‚Œã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
app/
â”œâ”€â”€ stores/
â”‚   â””â”€â”€ [storeId]/
â”‚       â”œâ”€â”€ page.tsx          # åº—èˆ—ãƒˆãƒƒãƒ—
â”‚       â”œâ”€â”€ about/
â”‚       â”‚   â””â”€â”€ page.tsx      # åº—èˆ—ã«ã¤ã„ã¦
â”‚       â”œâ”€â”€ menu/
â”‚       â”‚   â””â”€â”€ page.tsx      # ãƒ¡ãƒ‹ãƒ¥ãƒ¼
â”‚       â”œâ”€â”€ news/
â”‚       â”‚   â”œâ”€â”€ page.tsx      # ãŠçŸ¥ã‚‰ã›ä¸€è¦§
â”‚       â”‚   â””â”€â”€ [newsId]/
â”‚       â”‚       â””â”€â”€ page.tsx  # ãŠçŸ¥ã‚‰ã›è©³ç´°
â”‚       â”œâ”€â”€ contact/
â”‚       â”‚   â”œâ”€â”€ page.tsx      # ãŠå•ã„åˆã‚ã›
â”‚       â”‚   â””â”€â”€ actions.ts    # Server Actions
â”‚       â””â”€â”€ layout.tsx        # åº—èˆ—å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Store/
â”‚   â”‚   â”œâ”€â”€ StoreHero.tsx
â”‚   â”‚   â”œâ”€â”€ StoreInfo.tsx
â”‚   â”‚   â”œâ”€â”€ StoreMap.tsx
â”‚   â”‚   â””â”€â”€ StoreNews.tsx
â”‚   â”œâ”€â”€ Layout/
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ Footer.tsx
â”‚   â”‚   â””â”€â”€ Navigation.tsx
â”‚   â””â”€â”€ SEO/
â”‚       â”œâ”€â”€ StructuredData.tsx
â”‚       â””â”€â”€ MetaTags.tsx
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ api.ts
â”‚   â”œâ”€â”€ analytics.ts
â”‚   â””â”€â”€ seo.ts
â””â”€â”€ styles/
    â””â”€â”€ globals.css
```

## ğŸš¨ æŠ€è¡“çš„èª²é¡Œãƒ»æ¤œè¨äº‹é …

### ISRï¼ˆIncremental Static Regenerationï¼‰
- ãŠçŸ¥ã‚‰ã›æ›´æ–°æ™‚ã®å†ç”Ÿæˆã‚¿ã‚¤ãƒŸãƒ³ã‚°
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ï¼ˆåº—èˆ—æƒ…å ±å¤‰æ›´æ™‚ï¼‰
- ãƒ“ãƒ«ãƒ‰æ™‚é–“ã®æœ€é©åŒ–

### SEOãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿é€Ÿåº¦ï¼ˆCore Web Vitalsï¼‰
- ç”»åƒæœ€é©åŒ–ãƒ»CDNåˆ©ç”¨
- æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£

### ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£
- å¤§é‡åº—èˆ—ã‚µã‚¤ãƒˆã®ç®¡ç†
- ã‚µã‚¤ãƒˆãƒãƒƒãƒ—è‡ªå‹•ç”Ÿæˆ
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡æœ€é©åŒ–

## ğŸ“ˆ æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

### é›†å®¢æ”¯æ´åŠ¹æœ
- **æ¤œç´¢é †ä½å‘ä¸Š**: é©åˆ‡ãªSEOå¯¾ç­–ã«ã‚ˆã‚Šæ¤œç´¢ä¸Šä½è¡¨ç¤º
- **åœ°åŸŸæ¤œç´¢å¯¾å¿œ**: ãƒ­ãƒ¼ã‚«ãƒ«SEOã«ã‚ˆã‚‹åœ°åŸŸå¯†ç€é›†å®¢
- **ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£å‘ä¸Š**: ã‚¹ãƒãƒ›æœ€é©åŒ–ã«ã‚ˆã‚‹é›¢è„±ç‡æ”¹å–„

### é‹å–¶åŠ¹ç‡åŒ–
- **è‡ªå‹•ç”Ÿæˆ**: æ‰‹å‹•ä½œæ¥­ä¸è¦ã®åº—èˆ—ã‚µã‚¤ãƒˆä½œæˆ
- **ä¸€å…ƒç®¡ç†**: åº—èˆ—ç®¡ç†ã‚µã‚¤ãƒˆã‹ã‚‰ã®æƒ…å ±æ›´æ–°
- **åˆ†æãƒ‡ãƒ¼ã‚¿**: ã‚¢ã‚¯ã‚»ã‚¹è§£æã«ã‚ˆã‚‹æ”¹å–„æ–½ç­–

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](../../README.md)
- [é–‹ç™ºè²¢çŒ®ã‚¬ã‚¤ãƒ‰](../../CONTRIBUTING.md)
- [ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ](../../docs/2_architecture/system_overview.md)
- [åº—èˆ—ç®¡ç†ã‚µã‚¤ãƒˆ](../store-admin/README.md)
- [APIã‚µãƒ¼ãƒãƒ¼](../api/README.md)

## ğŸ“… é–‹ç™ºã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

| ãƒ•ã‚§ãƒ¼ã‚º | æœŸé–“ | ä¸»è¦æ©Ÿèƒ½ |
|---------|------|----------|
| **Phase 4** | 3-4é€±é–“ | åŸºæœ¬ã‚µã‚¤ãƒˆç”Ÿæˆãƒ»SEOåŸºç›¤ |
| **Phase 5** | 2-3é€±é–“ | å•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ãƒ»åˆ†æ |
| **Phase 6** | 3-4é€±é–“ | é«˜åº¦ãªSEOãƒ»PWAæ©Ÿèƒ½ |

---

**SEOæœ€é©åŒ–ã•ã‚ŒãŸé«˜å“è³ªãªåº—èˆ—ã‚µã‚¤ãƒˆã§ã€å€‹äººåº—ã®é›†å®¢ã‚’æ ¹æœ¬ã‹ã‚‰æ”¯æ´** ğŸŒ